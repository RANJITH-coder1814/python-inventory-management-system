import os

FILENAME = "inventory.txt"

def add_item():
    pid = input("Enter Product ID: ")
    name = input("Enter Product Name: ")
    quantity = int(input("Enter Quantity: "))
    price = float(input("Enter Price: "))

    with open(FILENAME, "a") as file:
        file.write(f"{pid},{name},{quantity},{price}\n")

    print(" Product added successfully!\n")


def view_items():
    if not os.path.exists(FILENAME):
        print("No inventory records found!\n")
        return

    print("\n--- Inventory List ---")
    print("ID | Name | Quantity | Price")
    print("-" * 35)

    with open(FILENAME, "r") as file:
        for line in file:
            pid, name, quantity, price = line.strip().split(",")
            print(f"{pid} | {name} | {quantity} | ₹{price}")
    print()


def search_item():
    pid = input("Enter Product ID to search: ")

    if not os.path.exists(FILENAME):
        print("No inventory records found!\n")
        return

    with open(FILENAME, "r") as file:
        for line in file:
            data = line.strip().split(",")
            if data[0] == pid:
                print("\n--- Product Found ---")
                print(f"ID: {data[0]}")
                print(f"Name: {data[1]}")
                print(f"Quantity: {data[2]}")
                print(f"Price: ₹{data[3]}\n")
                return

    print("Product not found!\n")


def delete_item():
    pid = input("Enter Product ID to delete: ")
    found = False

    if not os.path.exists(FILENAME):
        print("No inventory records found!\n")
        return

    with open(FILENAME, "r") as file:
        lines = file.readlines()

    with open(FILENAME, "w") as file:
        for line in lines:
            if line.split(",")[0] != pid:
                file.write(line)
            else:
                found = True

    if found:
        print(" Product deleted successfully!\n")
    else:
        print(" Product not found!\n")


def update_item():
    pid = input("Enter Product ID to update: ")
    found = False

    if not os.path.exists(FILENAME):
        print("No inventory records found!\n")
        return

    with open(FILENAME, "r") as file:
        lines = file.readlines()

    with open(FILENAME, "w") as file:
        for line in lines:
            data = line.strip().split(",")
            if data[0] == pid:
                print("Enter new details:")
                name = input("New Name: ")
                quantity = input("New Quantity: ")
                price = input("New Price: ")
                file.write(f"{pid},{name},{quantity},{price}\n")
                found = True
            else:
                file.write(line)

    if found:
        print(" Product updated successfully!\n")
    else:
        print(" Product not found!\n")


def menu():
    while True:
        print("===== Inventory Management System =====")
        print("1. Add Product")
        print("2. View Products")
        print("3. Search Product")
        print("4. Update Product")
        print("5. Delete Product")
        print("6. Exit")

        choice = input("Enter your choice: ")

        if choice == '1':
            add_item()
        elif choice == '2':
            view_items()
        elif choice == '3':
            search_item()
        elif choice == '4':
            update_item()
        elif choice == '5':
            delete_item()
        elif choice == '6':
            print(" Exiting Inventory Management System!")
            break
        else:
            print(" Invalid choice! Try again.\n")


if __name__ == "__main__":
    menu()
